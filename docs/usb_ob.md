# urb请求次数统计工具

## 功能描述

本程序是基于eBPF技术的USB设备操作监控工具，主要功能包括：

1. **进程级监控**：跟踪指定进程或cgroup的USB设备操作行为
2. **统计可视化**：生成直方图展示各进程的USB操作频次分布
3. **动态过滤**：支持PID过滤和cgroup容器环境监控

## 参数说明

| 短参数 | 长参数    | 参数值格式 | 描述                          |
|--------|-----------|------------|-------------------------------|
| `-p`   | `--pid`   | PID        | 监控指定进程ID的USB操作       |
| `-v`   | `--verbose`| -         | 启用详细调试输出模式          |
| `-c`   | `--cgroup`| 路径       | 监控指定cgroup路径下的进程    |
| `-h`   | `--help`  | -         | 显示完整帮助信息              |

## 字段说明

- max_count：最大次数
- pid：进程pid
- comm：进程名
- count：调用次数

## 使用示例

### 基础监控

```bash
sudo ./usb_ob  # 监控并统计系统所有USB操作次数
Tracing wakeup count... Hit Ctrl-C to end.
^C
max_count = 7
pid       comm                  count     
25413     usb-storage      4          |**********************                  |
0         swapper/3        1          |*****                                   |
25407     kworker/3:1      7          |****************************************|
```